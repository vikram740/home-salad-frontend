<div class="page">
  <div class="container">
    <div class="breadcrumb">
      <a routerLink="/adminDashboard">Dashboard</a>
      <span class="separator">></span>

      <a routerLink="/adminproducts">Products</a>
      <span class="separator">></span>

      <span class="active">Add New Product</span>
    </div>
    <form [formGroup]="productForm" (ngSubmit)="addProduct()">
      <!-- Name -->
      <div class="form-group">
        <label>Name *</label>
        <input type="text" formControlName="name" />
      </div>

      <!-- Category -->
      <div class="form-group">
        <label>Category *</label>
        <select formControlName="category" class="form-select">
          <option value="">Select Category</option>
          <option value="fruits">Fruits</option>
          <option value="vegetables">Vegetables</option>
        </select>
      </div>

      <!-- Description -->
      <div class="form-group">
        <label>Description *</label>
        <textarea formControlName="description"></textarea>
      </div>

      <!-- Weight -->
      <div class="form-group">
        <label>Weight *</label>
        <input
          type="text"
          formControlName="weight"
          placeholder="Ex: 250g / 1kg"
        />
      </div>

      <!-- Nutrition -->
      <div class="form-group">
        <label>Nutrition *</label>
        <textarea
          formControlName="nutrition"
          placeholder="Calories, Protein, Carbs etc"
        >
        </textarea>
      </div>

      <!-- Images -->
      <div class="form-group">
        <label>Images *</label>
        <div class="image-wrapper">
          <div
            class="image-card"
            *ngFor="let file of selectedFiles; let i = index"
          >
            <p>Image {{ i + 1 }}</p>

            <p *ngIf="file">{{ file.name }}</p>

            <input
              type="file"
              hidden
              #fileInput
              (change)="onFileSelected($event, i)"
            />

            <button
              type="button"
              class="upload-btn"
              (click)="fileInput.click()"
            >
              Upload
            </button>

            <span *ngIf="file" class="remove-icon" (click)="removeFile(i)">
              ✖
            </span>

            <small *ngIf="i === 0">Primary Image</small>
          </div>
        </div>
      </div>

      <!-- Daily Price -->
      <div class="form-group">
        <label>Daily Price *</label>
        <input type="number" formControlName="dailyPrice" />
        <small
          >Base price per day. Weekly and monthly prices are derived from
          this.</small
        >
      </div>

      <!-- Weekly -->
      <div class="price-section">
        <!-- Weekly -->
        <div class="price-box">
          <h4>Weekly Price</h4>

          <div class="price-row">
            <!-- Input Left -->
            <div class="input-wrapper">
              <input
                *ngIf="productForm.value.weeklyType === 'manual'"
                type="number"
                formControlName="weeklyPrice"
                placeholder="enter amount"
                class="amount-input"
              />

              <input
                *ngIf="productForm.value.weeklyType === 'discount'"
                type="number"
                formControlName="weeklyDiscount"
                placeholder="10%"
                class="amount-input"
              />
            </div>

            <!-- Radios Right -->
            <div class="radio-group">
              <label>
                <input
                  type="radio"
                  value="manual"
                  formControlName="weeklyType"
                />
                Set Weekly Price Manually
              </label>

              <label>
                <input
                  type="radio"
                  value="discount"
                  formControlName="weeklyType"
                />
                Apply Weekly Discount (%)
              </label>
            </div>
          </div>

          <!-- KEEP YOUR LOGIC (UNCHANGED) -->
          <small *ngIf="productForm.value.weeklyType === 'manual'">
            Enter the price per day for weekly subscriptions.
          </small>

          <p *ngIf="productForm.value.weeklyType === 'discount'">
            Calculated Weekly Price: ₹{{ calculatedWeekly }}
          </p>
        </div>

        <!-- Monthly -->
        <div class="price-box">
          <h4>Monthly Price</h4>

          <div class="price-row">
            <div class="input-wrapper">
              <input
                *ngIf="productForm.value.monthlyType === 'manual'"
                type="number"
                formControlName="monthlyPrice"
                placeholder="enter amount"
                class="amount-input"
              />

              <input
                *ngIf="productForm.value.monthlyType === 'discount'"
                type="number"
                formControlName="monthlyDiscount"
                placeholder="20%"
                class="amount-input"
              />
            </div>

            <div class="radio-group">
              <label>
                <input
                  type="radio"
                  value="manual"
                  formControlName="monthlyType"
                />
                Set Monthly Price Manually
              </label>

              <label>
                <input
                  type="radio"
                  value="discount"
                  formControlName="monthlyType"
                />
                Apply Weekly Discount (%)
              </label>
            </div>
          </div>

          <!-- KEEP YOUR LOGIC -->
          <small *ngIf="productForm.value.monthlyType === 'manual'">
            Enter the price per day for monthly subscriptions.
          </small>

          <p *ngIf="productForm.value.monthlyType === 'discount'">
            Calculated Monthly Price: ₹{{ calculatedMonthly }}
          </p>
        </div>
      </div>

      <div class="buttons">
        <button class="cancel-btn">Cancel</button>
        <button type="submit" class="add-btn">Add Product</button>
      </div>
    </form>
  </div>
</div>
